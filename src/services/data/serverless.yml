processData:
  handler: src/services/data/processData/handler.default
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:PutObject
        - s3:GetObject
      Resource:
        - Fn::GetAtt:
          - EntityDataBucket
          - Arn
  environment:
    BUCKET_NAME:
      Ref: EntityDataBucket
  events:
    - http:
        path: v1/data
        method: get
        cors: ${file(src/templates/cors.yml):${self:provider.stage}}
        request:
          parameters:
            querystrings:
              entity: true
              user_id: true
              skip: true
              take: true